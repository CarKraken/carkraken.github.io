<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript"
            src="sepFil.js">
        </script>
    </head>
<body>
    <!--NOTE: newFil and mainSc could be the same doc, then wouldn't need local storage, BUT
    //need to figure out how to ask user to save before they leave page-->

    <div>
        <!--have "save log" buttons here!-->
        <a href="newFil.html">Click here to select LPF Location</a>
    </div>

    <div>
        <!--proposition: instead of having a select tag dropdown, use a div and a button;
            when button clicked, change div color + reveal div containing individual equipment + buttons-->
        <!--note for css: make box around each div for clarity-->
        <div>
            <h4>Badminton
                <button type="button" onclick="shoHid('drpdownBadminton')">^</button>
            </h4>
        </div>
        <div class="dropdownSport" id="drpdownBadminton" style="display:none">
            <div>
                <label for="badminton">Badminton Net</label>
                <button type="button" onclick="decValBmNet()" style="display:inline-block">-</button>
                <p id="bmn_nt" style="display:inline-block"></p>
                <button type="button" onclick="incValBmNet()" style="display:inline-block">+</button>
            </div>

            <div>
                <label for="badminton">Badminton Poles</label>
                <button type="button" onclick="testLocStor()">Test Locstr</button>
                <p>Did I update?: 4</p>
                <p id="itWorks">56 oh boy it works</p>
                <button type="button">-</button>
                <p id="bmn_pl" style="display:inline-block"></p>
                <button type="button">+</button>
            </div> 
            <br>
            <form action="/action_page.php">
                <label for="badminton">Badminton Raquet</label>
                <button type="button">+</button>
                <!-- display value of a variable here-->
                <button type="button">-</button>
            </form>
            <br>
            <form action="/action_page.php">
                <label for="badminton">Badminton Raquet Cover</label>
                <button type="button">+</button>
                <!-- display value of a variable here-->
                <button type="button">-</button>
            </form>
        </div>
        <p>click on carrot to show/collapse dropdown</p>                    
    </div>

    <!--use to send spreadsheet to LPF?-->
    <!--a href="mailto:name@levelingtheplayingfield.org">Send email</a>-->
</body>
</html>

<!--SCRIPT HERE-->
<script>

//FUNCTIONS HERE
function shoHid(drpId){
    //div w/ id “drpdown”
    var plchold = document.getElementById(drpId);
    if (plchold.style.display === "none") {
        plchold.style.display = "block";
    } else {
        //sets div to hidden
        plchold.style.display = "none";
    }
}

//code for asking user to save 
//set needToConfirm to false when user saves log (should also reset all variables in local storage)
var needToConfirm = true;

window.onbeforeunload = confirmExit;
function confirmExit()
{
    if (needToConfirm){
        //are you sure box pops up, but this msg isn't there
        return "Please save the log as either finished or unfinished before leaving this page.";
    }
}

//FIX: isn't getting into fxn
function testLocStor(){
    //test: button should +1 both equipment types
    allEquipmentTypesArray.BadmintonNet++;
    //document.getElementById("bmn_nt").innerHTML = allEquipmentTypesArray.BadmintonNet;
    //tests parseInt
    //document.getElementById("bmn_nt").innerHTML = parseInt(getElementById("bmn_nt")) + 1;
    document.getElementById("bmn_nt").innerHTML = parseInt(getElementById("itWorks"));

    //ALT: get val from element w/ ID bmn_pl and set locStr to that val + 1
    localStorage.setItem("badPol") = parseInt(document.getElementById("bmn_pl")) + 1;
    //convert to int then add 1
    //change js badPol to 1 on the off chance that that's the issue?
    //localStorage.setItem("badPol") = parseInt(localStorage.getItem("badPol")) + 1;
    document.getElementById("bmn_pl").innerHTML = localStorage.getItem("badPol");
}

//need a function for each equipment type??
function incValBmNet(){
    allEquipmentTypesArray.BadmintonNet++;
    document.getElementById("bmn_nt").innerHTML = allEquipmentTypesArray.BadmintonNet;
}

function decValBmNet(){
    if(allEquipmentTypesArray.BadmintonNet > 0){
      allEquipmentTypesArray.BadmintonNet--;
    document.getElementById("bmn_nt").innerHTML = allEquipmentTypesArray.BadmintonNet;  
    } 
}

//NEXT: see if can get this to work
function incVal(equipmentType, idid){
    allEquipmentTypesArray.equipmentType++;
    document.getElementById(idid).innerHTML = "testidid";
}

//find index pos, find variable at index, increment this variable
    //how to serch for variable, not variable value?
    //indx = allEquipmentTypesArray.indexOf(equipName);
    //document.getElementById("incValTest").innerHTML = String(indx);
    //allEquipmentTypesArray[indx]++;
    //document.getElementById("incValTest2").innerHTML = String(allEquipmentTypesArray[indx]);

function saveCompleteLog(){
    //iterate through object to create string to export as CSV
}

//see sepFil for array of equipment


//check to make sure getItem from js is working
document.getElementById("bmn_pl").innerHTML = localStorage.getItem("badPol");

//if doesn't work, try allEquipmentTypesArray.BadmintonNet[]
//code to initially display js variables in html
document.getElementById("bmn_nt").innerHTML = String(allEquipmentTypesArray.BadmintonNet);
</script>        

